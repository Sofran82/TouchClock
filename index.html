<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=11">
<title>TouchClock</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: black;
    font-family: Trebuchet MS, Arial, sans-serif;
}

#clock {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    text-align: center;
    color: #00ff00;
}

#time {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    white-space: nowrap;
}

#settingsButton {
    position: absolute;
    bottom: 20px;
    right: 20px;
    font-size: 20px;
    padding: 10px 16px;
    background: #222;
    color: white;
    border: none;
}

#settings {
    position: absolute;
    bottom: 70px;
    right: 20px;
    background: #111;
    color: white;
    padding: 15px;
    display: none;
    font-size: 18px;
}

input {
    font-size: 18px;
}
</style>
</head>

<body>

<!-- Osynlig video för att hålla skärmen vaken -->
<video autoplay loop muted width="1" height="1">
    <source src="data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAAAAG1wNDFtcDQyaXNvbTY4AAACAGlzb20AAAAAAAEAAQABAAABGm1vb3YAAABsbXZoZAAAAAB8J3gAfCd4AAAC8AAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=" type="video/mp4">
</video>

<div id="clock">
    <div id="time">
        <span id="hours">00</span><span id="colon">:</span><span id="minutes">00</span>
    </div>
</div>

<button id="settingsButton">⚙</button>

<div id="settings">
    <div>
        Alarmfärg (hex):<br>
        <input type="text" id="alarmColor" value="#ff0000">
    </div>
</div>

<script>
var alarmColor = "#ff0000";
var normalColor = "#00ff00";
var showColon = true;
var hideSettingsTimer = null;

function updateLayout() {
    var w = document.documentElement.clientWidth;
    var h = document.documentElement.clientHeight;

    var size = Math.min(w, h) * 0.45;

    document.getElementById("time").style.fontSize = size + "px";
}

function updateTime() {
    var d = new Date();
    var h = d.getHours();
    var m = d.getMinutes();
    var s = d.getSeconds();

    document.getElementById("hours").textContent = (h < 10 ? "0" : "") + h;
    document.getElementById("minutes").textContent = (m < 10 ? "0" : "") + m;

    showColon = !showColon;
    document.getElementById("colon").style.visibility = showColon ? "visible" : "hidden";
}

function showSettings() {
    var s = document.getElementById("settings");
    s.style.display = "block";

    if (hideSettingsTimer) clearTimeout(hideSettingsTimer);
    hideSettingsTimer = setTimeout(function () {
        s.style.display = "none";
    }, 5000);
}

document.getElementById("settingsButton").onclick = showSettings;

document.getElementById("alarmColor").onchange = function () {
    var v = this.value;
    if (/^#[0-9A-Fa-f]{6}$/.test(v)) {
        alarmColor = v;
    }
};

window.onresize = updateLayout;

updateLayout();
updateTime();
setInterval(updateTime, 1000);
</script>

</body>
</html>
