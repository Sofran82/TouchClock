<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=11">
<title>TouchClock</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: black;
    font-family: "Segoe UI", Arial, sans-serif;
}

#clock {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    text-align: center;
    color: #00ff00;
}

#time {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    white-space: nowrap;
    font-family: "Segoe UI", Arial, sans-serif;
    font-weight: 600; 
    text-shadow:
        1px 0 0 currentColor,
       -1px 0 0 currentColor,
        0 1px 0 currentColor,
        0 -1px 0 currentColor;
}

#settingsButton {
    position: absolute;
    bottom: 20px;
    right: 20px;
    font-size: 32px;        /* större text */
    padding: 20px 28px;     /* större klickyta */
    background: #222;
    color: white;
    border: none;
    cursor: pointer;
    touch-action: manipulation;
    z-index: 1001;
    border-radius: 6px;
}

#settings {
    position: absolute;
    bottom: 70px;
    right: 20px;
    background: #111;
    color: white;
    padding: 15px;
    display: none;
    font-size: 18px;
    z-index: 1000;
}

#settings div {
    margin-top: 10px;
}

input, select {
    font-size: 18px;
    width: 130px;
}
</style>
</head>

<body>

<div id="clock">
    <div id="time">
        <span id="hours">00</span><span id="colon">:</span><span id="minutes">00</span>
    </div>
</div>

<button id="settingsButton">⚙</button>

<div id="settings">
    <div>
        Alarmfärg (hex):<br>
        <input type="text" id="alarmColor" value="#00ff00">
    </div>
    <div>
        Blinkande kolon:<br>
        <select id="colonBlink">
            <option value="true" selected>Ja</option>
            <option value="false">Nej</option>
        </select>
    </div>
    <div>
        Textstorlek (% av skärmen):<br>
        <input type="number" id="textSize" value="45" min="10" max="100">%
    </div>
</div>

<script>
var alarmColor = "#00ff00";  // skarpt grön
var showColon = true;
var blinkColon = true;
var textSizePercent = 0.45;
var hideSettingsTimer = null;

// uppdatera klockstorlek
function updateLayout() {
    var w = document.documentElement.clientWidth;
    var h = document.documentElement.clientHeight;
    var size = Math.min(w, h) * textSizePercent;
    document.getElementById("time").style.fontSize = size + "px";
}

// uppdatera tid och blinkande kolon
function updateTime() {
    var d = new Date();
    var h = d.getHours();
    var m = d.getMinutes();

    document.getElementById("hours").textContent = (h < 10 ? "0" : "") + h;
    document.getElementById("minutes").textContent = (m < 10 ? "0" : "") + m;

    if(blinkColon){
        showColon = !showColon;
        document.getElementById("colon").style.visibility = showColon ? "visible" : "hidden";
    } else {
        document.getElementById("colon").style.visibility = "visible";
    }

    document.getElementById("clock").style.color = alarmColor;
}

// visa inställningspanelen
function showSettings() {
    var s = document.getElementById("settings");
    s.style.display = "block";

    if (hideSettingsTimer) clearTimeout(hideSettingsTimer);
    hideSettingsTimer = setTimeout(function () {
        s.style.display = "none";
    }, 5000);
}

var btn = document.getElementById("settingsButton");
btn.onclick = showSettings;
btn.ontouchstart = showSettings; // touch support

// ändra larmfärg
document.getElementById("alarmColor").onchange = function () {
    var v = this.value;
    if (/^#[0-9A-Fa-f]{6}$/.test(v)) {
        alarmColor = v;
    }
};

// ändra blinkande kolon
document.getElementById("colonBlink").onchange = function() {
    blinkColon = this.value === "true";
};

// ändra textstorlek
document.getElementById("textSize").onchange = function() {
    var val = parseInt(this.value);
    if(!isNaN(val) && val >= 10 && val <= 100){
        textSizePercent = val / 100;
        updateLayout();
    }
};

// anpassa layout vid fönsterändring
window.onresize = updateLayout;

// initiera klocka
updateLayout();
updateTime();
setInterval(updateTime, 1000);
</script>

</body>
</html>
